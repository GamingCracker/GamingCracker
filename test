local plr = game.Players.LocalPlayer
local lastPos = plr.Character.PrimaryPart.CFrame

-- Set up a variable to track whether bring mode is active or not
local bringModeActive = false

plr.Character:SetPrimaryPartCFrame(game.ReplicatedStorage.ViewportNPCs.Eren.PrimaryPart.CFrame * CFrame.new(0,10,0))

while task.wait() do
    pcall(function()
        for i, v in pairs(workspace.ReplicatedChunks:GetDescendants()) do
            if v.Name == "Clown Pirate" then
                local enemy = v
                lastPos = enemy.PrimaryPart.CFrame
                repeat task.wait()
                    local char = plr.Character

                    -- If bring mode is active, bring the player to the enemy
                    if bringModeActive then
                        char:SetPrimaryPartCFrame(enemy.PrimaryPart.CFrame * CFrame.new(0,-10,0))
                    end

                    local args = {
                        [1] = game:GetService("Players").LocalPlayer.Character.Punch,
                        [2] = enemy
                    }

                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Melee"):FireServer(unpack(args))

                until enemy.Humanoid.Health <=0 or not enemy
            end
        end
        plr.Character:SetPrimaryPartCFrame(lastPos * CFrame.new(0,10,0))
    end)
end

-- Create a function that can be called by other scripts to turn on bring mode
function turnOnBringMode()
    bringModeActive = true
end

-- Create a function that can be called by other scripts to turn off bring mode
function turnOffBringMode()
    bringModeActive = false
end

-- Example usage:
-- turnOnBringMode() -- call this function to turn on bring mode
-- turnOffBringMode() -- call this function to turn off bring mode
