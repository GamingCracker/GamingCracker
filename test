local plr = game.Players.LocalPlayer
local lastPos = plr.Character.PrimaryPart.CFrame

-- Set up a variable to track whether the script is active or not
local scriptActive = true

plr.Character:SetPrimaryPartCFrame(game.ReplicatedStorage.ViewportNPCs.Eren.PrimaryPart.CFrame * CFrame.new(0,10,0))

while task.wait() do
    -- Only run the script if it is active
    if scriptActive then
        pcall(function()
            for i, v in pairs(workspace.ReplicatedChunks:GetDescendants()) do
                if v.Name == "Clown Pirate" then
                    local enemy = v
                    lastPos = enemy.PrimaryPart.CFrame
                    repeat task.wait()
                        local char = plr.Character

                        char:SetPrimaryPartCFrame(enemy.PrimaryPart.CFrame * CFrame.new(0,-10,0))
                        local args = {
                            [1] = game:GetService("Players").LocalPlayer.Character.Punch,
                            [2] = enemy
                        }

                        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Melee"):FireServer(unpack(args))

                    until enemy.Humanoid.Health <=0 or not enemy or not scriptActive
                end
            end
            plr.Character:SetPrimaryPartCFrame(lastPos * CFrame.new(0,10,0))
        end)
    end
end

-- Create a function that can be called by other scripts to turn off the script
function turnOffScript()
    scriptActive = false
end

-- Example usage:
-- turnOffScript() -- call this function to turn off the script
